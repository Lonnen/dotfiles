{"mode":"editor","version":1,"windowDimensions":{"x":-1,"y":22,"width":958,"height":1058,"maximized":false},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"project":{"paths":["/Users/lonnen/repos/hubot-aws-sns"],"buffers":[{"text":"# Description:\n#   receives messages from AWS SNS topic for cloudwatch\n#\n# Dependencies:\n#   None\n#\n# Configuration:\n#   None\n#\n# Commands:\n#   None\n#\n# URLS:\n#   POST /aws-sns/:room\n#\n# Author:\n#   jasonthomas\n#   lonnen\n\nirc = require('irc')\nSNSClient = require('aws-snsclient')\n\nmodule.exports = (robot) ->\n    robot.router.post '/aws-sns/:room', (req, res) ->\n        room = req.params.room\n        auth =\n            verify: false\n\n        # automatically handles confirmation requests\n        client = SNSClient(auth, (err, message) ->\n            throw err if err\n\n            if message.Subject.match /OK/\n                state_color = 'light_green'\n            else if message.Subject.match /ALARM/\n                state_color = 'light_red'\n            else\n                state_color = 'orange'\n\n            state = irc.colors.wrap(state_color, message.Subject)\n            reason = irc.colors.wrap('white', JSON.parse(message.Message).NewStateReason)\n\n            robot.messageRoom \"##{room}\", \"#{state}: #{reason}\"\n        )\n\n        client(req, res)\n        res.end()\n","markers":{"markers":{"1":{"id":1,"range":[[24,0],[24,0]],"tailed":false,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":14,"goalScreenRange":null,"preserveFolds":true,"autoscroll":true},"deserializer":"Marker"},"167":{"id":167,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"260":{"id":260,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"273":{"id":273,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"286":{"id":286,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"299":{"id":299,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"370":{"id":370,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"432":{"id":432,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"441":{"id":441,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"520":{"id":520,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"529":{"id":529,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"636":{"id":636,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"665":{"id":665,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"690":{"id":690,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"699":{"id":699,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"742":{"id":742,"range":[[30,28],[30,28]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"2149":{"id":2149,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"2282":{"id":2282,"range":[[31,0],[31,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History","version":1},"encoding":"utf8","filePath":"/Users/lonnen/repos/hubot-aws-sns/src/aws-notifier.coffee","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"35f3788da935dbb45ec8c92d8f5e20adda0be633","deserializer":"TextBuffer"},{"text":"{\n  \"name\": \"hubot-aws-sns\",\n  \"version\": \"0.3.5\",\n  \"description\": \"a hubot plugin to listen for and announce AWS SNS topics\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"./script/test\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/lonnen/hubot-aws-sns\"\n  },\n  \"dependencies\": {\n    \"aws-snsclient\": \"0.2.0\",\n    \"coffee-script\": \"~1.7.1\",\n    \"irc\": \"^0.3.12\"\n  },\n  \"devDependencies\": {\n    \"mocha\": \"*\",\n    \"chai\": \"*\",\n    \"sinon-chai\": \"*\",\n    \"sinon\": \"*\"\n  },\n  \"keywords\": [\n    \"hubot\"\n  ],\n  \"author\": \"lonnen <lonnen@mozilla.com>\",\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/lonnen/hubot-aws-sns/issues\"\n  },\n  \"homepage\": \"https://github.com/lonnen/hubot-aws-sns\"\n}\n","markers":{"markers":{"1":{"id":1,"range":[[14,30],[14,30]],"tailed":false,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":52,"goalScreenRange":null,"preserveFolds":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History","version":1},"encoding":"utf8","filePath":"/Users/lonnen/repos/hubot-aws-sns/package.json","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"a04b0e5580b6eb7445325c50bc3b99ebd72d0e09","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":14,"softTabs":true,"displayBuffer":{"id":15,"softWrapped":true,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/lonnen/repos/hubot-aws-sns/src/aws-notifier.coffee","invisibles":null,"deserializer":"TokenizedBuffer"},"invisibles":null,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":52,"softTabs":true,"displayBuffer":{"id":53,"softWrapped":true,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/lonnen/repos/hubot-aws-sns/package.json","invisibles":null,"deserializer":"TokenizedBuffer"},"invisibles":null,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/lonnen/repos/hubot-aws-sns/src/aws-notifier.coffee","focused":true,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-coffee-script","language-javascript","language-json","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"command-logger":{"eventLog":{"application:new-file":{"count":12,"name":"application:new-file","lastRun":1429920708681},"editor:display-updated":{"count":8098,"name":"editor:display-updated","lastRun":1430330699569},"pane:item-added":{"count":27,"name":"pane:item-added","lastRun":1430238339792},"pane-container:active-pane-item-changed":{"count":94,"name":"pane-container:active-pane-item-changed","lastRun":1430264921135},"editor:attached":{"count":32,"name":"editor:attached","lastRun":1430264919718},"pane:active-item-changed":{"count":88,"name":"pane:active-item-changed","lastRun":1430264921147},"core:close":{"count":34,"name":"core:close","lastRun":1430238526414},"pane:before-item-destroyed":{"count":25,"name":"pane:before-item-destroyed","lastRun":1430238526144},"editor:detached":{"count":72,"name":"editor:detached","lastRun":1430197184440},"editor:will-be-removed":{"count":72,"name":"editor:will-be-removed","lastRun":1430197184440},"pane:item-removed":{"count":25,"name":"pane:item-removed","lastRun":1430238526412},"core:paste":{"count":44,"name":"core:paste","lastRun":1430195799548},"cursor:moved":{"count":1837,"name":"cursor:moved","lastRun":1430268224807},"selection:changed":{"count":1863,"name":"selection:changed","lastRun":1430268224807},"pane:active-item-modified-status-changed":{"count":118,"name":"pane:active-item-modified-status-changed","lastRun":1430197876322},"core:save":{"count":114,"name":"core:save","lastRun":1430197876324},"pane:active-item-title-changed":{"count":5,"name":"pane:active-item-title-changed","lastRun":1429920716728},"core:move-to-top":{"count":6,"name":"core:move-to-top","lastRun":1430238536349},"core:delete":{"count":90,"name":"core:delete","lastRun":1430183473511},"core:backspace":{"count":512,"name":"core:backspace","lastRun":1430197874524},"editor:newline":{"count":76,"name":"editor:newline","lastRun":1430197847088},"core:move-left":{"count":118,"name":"core:move-left","lastRun":1430197188386},"core:undo":{"count":340,"name":"core:undo","lastRun":1430196003821},"tree-view:add-folder":{"count":4,"name":"tree-view:add-folder","lastRun":1429920549873},"core:confirm":{"count":14,"name":"core:confirm","lastRun":1429920565188},"tree-view:add-file":{"count":5,"name":"tree-view:add-file","lastRun":1429920554351},"pane:show-previous-item":{"count":26,"name":"pane:show-previous-item","lastRun":1430264921147},"pane:show-next-item":{"count":18,"name":"pane:show-next-item","lastRun":1430264919731},"core:move-down":{"count":126,"name":"core:move-down","lastRun":1430268224806},"core:move-right":{"count":112,"name":"core:move-right","lastRun":1430238534277},"core:select-all":{"count":8,"name":"core:select-all","lastRun":1430184439952},"core:select-up":{"count":42,"name":"core:select-up","lastRun":1430197844322},"editor:outdent-selected-rows":{"count":16,"name":"editor:outdent-selected-rows","lastRun":1430182641036},"core:select-down":{"count":10,"name":"core:select-down","lastRun":1430195793897},"editor:select-to-first-character-of-line":{"count":4,"name":"editor:select-to-first-character-of-line","lastRun":1430195794289},"core:move-up":{"count":148,"name":"core:move-up","lastRun":1430238540387},"core:redo":{"count":14,"name":"core:redo","lastRun":1430183839443},"editor:move-to-end-of-screen-line":{"count":18,"name":"editor:move-to-end-of-screen-line","lastRun":1430195485695},"editor:indent-selected-rows":{"count":2,"name":"editor:indent-selected-rows","lastRun":1429920807980},"core:copy":{"count":22,"name":"core:copy","lastRun":1430197821483},"editor:move-to-first-character-of-line":{"count":6,"name":"editor:move-to-first-character-of-line","lastRun":1430195828803},"window:close":{"count":1,"name":"window:close","lastRun":1429922468610},"snippets:next-tab-stop":{"count":4,"name":"snippets:next-tab-stop","lastRun":1430197847545},"snippets:expand":{"count":4,"name":"snippets:expand","lastRun":1430197847546},"editor:indent":{"count":8,"name":"editor:indent","lastRun":1430197847556},"application:quit":{"count":2,"name":"application:quit","lastRun":1430179957019},"window:update-available":{"count":2,"name":"window:update-available","lastRun":1430184437545},"core:cut":{"count":6,"name":"core:cut","lastRun":1430195792899},"find-and-replace:show":{"count":2,"name":"find-and-replace:show","lastRun":1430194822389},"editor:consolidate-selections":{"count":1,"name":"editor:consolidate-selections","lastRun":1430194824009},"core:cancel":{"count":2,"name":"core:cancel","lastRun":1430194824022},"core:select-right":{"count":24,"name":"core:select-right","lastRun":1430195786505},"core:select-left":{"count":40,"name":"core:select-left","lastRun":1430195792504},"application:install-update":{"count":1,"name":"application:install-update","lastRun":1430238341496},"core:move-to-bottom":{"count":4,"name":"core:move-to-bottom","lastRun":1430238536715}}},"fuzzy-finder":{"/Users/lonnen/repos/hubot-aws-sns/src/aws-notifier.coffee":1430264921147,"/Users/lonnen/repos/hubot-aws-sns/package.json":1430264919730},"keybinding-resolver":{},"metrics":{"sessionLength":92177387},"tree-view":{"directoryExpansionStates":{"/Users/lonnen/repos/hubot-aws-sns":{"isExpanded":true,"entries":{".git":{"isExpanded":false,"entries":{}},"node_modules":{"isExpanded":false,"entries":{}},"script":{"isExpanded":true,"entries":{}},"src":{"isExpanded":true,"entries":{}},"test":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/lonnen/repos/hubot-aws-sns/src/aws-notifier.coffee","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200},"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false,"wholeWord":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":[],"replaceHistory":[],"pathsHistory":[]}}}