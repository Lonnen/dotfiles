
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

// This function is abstracted in case the (undocumented) Atom API beneath ever changes.
function getBrowserWindow() {
  return atom.getCurrentWindow();
}

module.exports = {

  getCookies: function getCookies(domain) {
    return new Promise(function (resolve, reject) {
      getBrowserWindow().webContents.session.cookies.get({
        domain: domain
      }, function (error, cookies) {
        if (error) {
          reject(error);
        } else {
          (function () {
            var cookieMap = {};
            cookies.forEach(function (cookie) {
              cookieMap[cookie.name] = cookie.value;
            });
            resolve(cookieMap);
          })();
        }
      });
    });
  },

  setCookie: function setCookie(url, domain, name, value) {
    return new Promise(function (resolve, reject) {
      getBrowserWindow().webContents.session.cookies.set({
        url: url,
        domain: domain,
        name: name,
        value: value
      }, function (error) {
        if (error) {
          reject(error);
        } else {
          resolve();
        }
      });
    });
  }

};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBwZmw1Mm5wdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLWF0b20taGVscGVycy9saWIvYnJvd3Nlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUM7Ozs7Ozs7Ozs7O0FBWVosU0FBUyxnQkFBZ0IsR0FBRztBQUMxQixTQUFPLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0NBQ2hDOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7O0FBRWYsWUFBVSxFQUFBLG9CQUFDLE1BQWMsRUFBb0M7QUFDM0QsV0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUs7QUFDdEMsc0JBQWdCLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDakQsY0FBTSxFQUFFLE1BQU07T0FDZixFQUFFLFVBQUMsS0FBSyxFQUFFLE9BQU8sRUFBSztBQUNyQixZQUFJLEtBQUssRUFBRTtBQUNULGdCQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDZixNQUFNOztBQUNMLGdCQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7QUFDckIsbUJBQU8sQ0FBQyxPQUFPLENBQUMsVUFBQSxNQUFNLEVBQUk7QUFDeEIsdUJBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQzthQUN2QyxDQUFDLENBQUM7QUFDSCxtQkFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztTQUNwQjtPQUNGLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztHQUNKOztBQUVELFdBQVMsRUFBQSxtQkFBQyxHQUFXLEVBQUUsTUFBYyxFQUFFLElBQVksRUFBRSxLQUFhLEVBQWlCO0FBQ2pGLFdBQU8sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3RDLHNCQUFnQixFQUFFLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO0FBQ2pELFdBQUcsRUFBRSxHQUFHO0FBQ1IsY0FBTSxFQUFFLE1BQU07QUFDZCxZQUFJLEVBQUUsSUFBSTtBQUNWLGFBQUssRUFBRSxLQUFLO09BQ2IsRUFBRSxVQUFDLEtBQUssRUFBSztBQUNaLFlBQUksS0FBSyxFQUFFO0FBQ1QsZ0JBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNmLE1BQU07QUFDTCxpQkFBTyxFQUFFLENBQUM7U0FDWDtPQUNGLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztHQUNKOztDQUVGLENBQUMiLCJmaWxlIjoiL3Zhci9mb2xkZXJzL3hmL3JzcGg0X2M1NzMxNXJzNTd4eHNkc2tyeG52MzZ0MC9UL3RtcHBmbDUybnB1Ymxpc2hfcGFja2FnZXMvbnBtL251Y2xpZGUtYXRvbS1oZWxwZXJzL2xpYi9icm93c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCc7XG4vKiBAZmxvdyAqL1xuXG4vKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIGxpY2Vuc2UgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpblxuICogdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuLy8gVGhpcyBmdW5jdGlvbiBpcyBhYnN0cmFjdGVkIGluIGNhc2UgdGhlICh1bmRvY3VtZW50ZWQpIEF0b20gQVBJIGJlbmVhdGggZXZlciBjaGFuZ2VzLlxuZnVuY3Rpb24gZ2V0QnJvd3NlcldpbmRvdygpIHtcbiAgcmV0dXJuIGF0b20uZ2V0Q3VycmVudFdpbmRvdygpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBnZXRDb29raWVzKGRvbWFpbjogc3RyaW5nKTogUHJvbWlzZTx7W2tleTogc3RyaW5nXTogc3RyaW5nfT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnZXRCcm93c2VyV2luZG93KCkud2ViQ29udGVudHMuc2Vzc2lvbi5jb29raWVzLmdldCh7XG4gICAgICAgIGRvbWFpbjogZG9tYWluLFxuICAgICAgfSwgKGVycm9yLCBjb29raWVzKSA9PiB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgY29va2llTWFwID0ge307XG4gICAgICAgICAgY29va2llcy5mb3JFYWNoKGNvb2tpZSA9PiB7XG4gICAgICAgICAgICBjb29raWVNYXBbY29va2llLm5hbWVdID0gY29va2llLnZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlc29sdmUoY29va2llTWFwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q29va2llKHVybDogc3RyaW5nLCBkb21haW46IHN0cmluZywgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGdldEJyb3dzZXJXaW5kb3coKS53ZWJDb250ZW50cy5zZXNzaW9uLmNvb2tpZXMuc2V0KHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGRvbWFpbjogZG9tYWluLFxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG59O1xuIl19
